(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{505:function(n,s,t){"use strict";t.r(s);var a=t(28),e=Object(a.a)({},(function(){var n=this,s=n.$createElement,t=n._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("p",[n._v("下载 rpm 包："),t("a",{attrs:{href:"https://nginx.org/en/linux_packages.html",target:"_blank",rel:"noopener noreferrer"}},[n._v("https://nginx.org/en/linux_packages.html"),t("OutboundLink")],1)]),n._v(" "),t("p",[n._v("下载 rpm 依赖包："),t("a",{attrs:{href:"http://mirrors.aliyun.com/centos/7/os/x86_64/Packages/",target:"_blank",rel:"noopener noreferrer"}},[n._v("http://mirrors.aliyun.com/centos/7/os/x86_64/Packages/"),t("OutboundLink")],1)]),n._v(" "),t("h3",{attrs:{id:"检查环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#检查环境"}},[n._v("#")]),n._v(" 检查环境")]),n._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# --test 表示仅检查安装环境不实际安装，如下所示，Failed 表示缺少 pcre2 依赖。")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),n._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# rpm -ivh --test nginx-1.24.0-1.el7.ngx.x86_64.rpm")]),n._v("\nwarning: nginx-1.24.0-1.el7.ngx.x86_64.rpm: Header V4 RSA/SHA256 Signature, key ID 7bd9bf62: NOKEY\nerror: Failed dependencies:\n        libpcre2-8.so.0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),n._v("64bit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v(" is needed by nginx-1:1.24.0-1.el7.ngx.x86_64\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),n._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#")]),n._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 通过 --test 这个参数，就可以逐个找到 nginx 所需要的所有 rpm 依赖。")]),n._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 直到出现下面，意味着可以正式安装 nginx 了。")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),n._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# rpm -ivh --test nginx-1.24.0-1.el7.ngx.x86_64.rpm")]),n._v("\nwarning: nginx-1.24.0-1.el7.ngx.x86_64.rpm: Header V4 RSA/SHA256 Signature, key ID 7bd9bf62: NOKEY\nPreparing"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("..")]),n._v(".                          "),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("################################# [100%]")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),n._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#")]),n._v("\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br"),t("span",{staticClass:"line-number"},[n._v("9")]),t("br"),t("span",{staticClass:"line-number"},[n._v("10")]),t("br"),t("span",{staticClass:"line-number"},[n._v("11")]),t("br"),t("span",{staticClass:"line-number"},[n._v("12")]),t("br"),t("span",{staticClass:"line-number"},[n._v("13")]),t("br"),t("span",{staticClass:"line-number"},[n._v("14")]),t("br")])]),t("p",[n._v("以下列出部分需要的依赖（安装Redis的适合已经安装了一些依赖）：")]),n._v(" "),t("ul",[t("li",[n._v("pcre2-10.23-2.el7.x86_64.rpm")])]),n._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 安装 nginx (去掉了 --test 参数)")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),n._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# rpm -ivh nginx-1.24.0-1.el7.ngx.x86_64.rpm")]),n._v("\nwarning: nginx-1.24.0-1.el7.ngx.x86_64.rpm: Header V4 RSA/SHA256 Signature, key ID 7bd9bf62: NOKEY\nPreparing"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("..")]),n._v(".                          "),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("################################# [100%]")]),n._v("\nUpdating / installing"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("..")]),n._v(".\n   "),t("span",{pre:!0,attrs:{class:"token number"}},[n._v("1")]),n._v(":nginx-1:1.24.0-1.el7.ngx         "),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("################################# [100%]")]),n._v("\n----------------------------------------------------------------------\n\nThanks "),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("for")]),n._v(" using nginx"),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("!")]),n._v("\n\nPlease "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("find")]),n._v(" the official documentation "),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("for")]),n._v(" nginx here:\n* https://nginx.org/en/docs/\n\nPlease subscribe to nginx-announce mailing list to get\nthe "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("most")]),n._v(" important news about nginx:\n* https://nginx.org/en/support.html\n\nCommercial subscriptions "),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("for")]),n._v(" nginx are available on:\n* https://nginx.com/products/\n\n----------------------------------------------------------------------\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),n._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#")]),n._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 查找一下安装位置")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),n._v("root@localhost opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# find / -name nginx")]),n._v("\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br"),t("span",{staticClass:"line-number"},[n._v("9")]),t("br"),t("span",{staticClass:"line-number"},[n._v("10")]),t("br"),t("span",{staticClass:"line-number"},[n._v("11")]),t("br"),t("span",{staticClass:"line-number"},[n._v("12")]),t("br"),t("span",{staticClass:"line-number"},[n._v("13")]),t("br"),t("span",{staticClass:"line-number"},[n._v("14")]),t("br"),t("span",{staticClass:"line-number"},[n._v("15")]),t("br"),t("span",{staticClass:"line-number"},[n._v("16")]),t("br"),t("span",{staticClass:"line-number"},[n._v("17")]),t("br"),t("span",{staticClass:"line-number"},[n._v("18")]),t("br"),t("span",{staticClass:"line-number"},[n._v("19")]),t("br"),t("span",{staticClass:"line-number"},[n._v("20")]),t("br"),t("span",{staticClass:"line-number"},[n._v("21")]),t("br"),t("span",{staticClass:"line-number"},[n._v("22")]),t("br"),t("span",{staticClass:"line-number"},[n._v("23")]),t("br"),t("span",{staticClass:"line-number"},[n._v("24")]),t("br"),t("span",{staticClass:"line-number"},[n._v("25")]),t("br")])]),t("h3",{attrs:{id:"重要目录及文件说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#重要目录及文件说明"}},[n._v("#")]),n._v(" 重要目录及文件说明")]),n._v(" "),t("table",[t("thead",[t("tr",[t("th",[n._v("目录")]),n._v(" "),t("th",[n._v("说明")])])]),n._v(" "),t("tbody",[t("tr",[t("td",[n._v("/etc/nginx")]),n._v(" "),t("td",[n._v("目录。nginx 默认配置文件的目录")])]),n._v(" "),t("tr",[t("td",[n._v("/etc/nginx/nginx.conf")]),n._v(" "),t("td",[n._v("文件。nginx主配置文件，文件最后配置了自动加载conf.d下*.conf的配置")])]),n._v(" "),t("tr",[t("td",[n._v("/etc/nginx/conf.d")]),n._v(" "),t("td",[n._v("目录。nginx的*.conf多个子配置存放目录")])]),n._v(" "),t("tr",[t("td",[n._v("/etc/nginx/conf.d/default.conf")]),n._v(" "),t("td",[n._v("文件。nginx子配置文件，主要用于端口、日志、负载均衡、反向代理等配置。")])]),n._v(" "),t("tr",[t("td",[n._v("/usr/sbin/nginx")]),n._v(" "),t("td",[n._v("文件。可执行二进制文件，nginx的启停等执行命令前缀")])]),n._v(" "),t("tr",[t("td",[n._v("/usr/share/nginx")]),n._v(" "),t("td",[n._v("目录。里面包含 html 静态资源目录")])]),n._v(" "),t("tr",[t("td",[n._v("/var/log/nginx")]),n._v(" "),t("td",[n._v("目录。日志文件存放目录")])])])]),n._v(" "),t("h3",{attrs:{id:"配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[n._v("#")]),n._v(" 配置")]),n._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[n._v("cat")]),n._v(" /etc/nginx/nginx.conf\n"),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("cat")]),n._v(" /etc/nginx/conf.d/default.conf\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br")])]),t("h3",{attrs:{id:"启动、停止、重启"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动、停止、重启"}},[n._v("#")]),n._v(" 启动、停止、重启")]),n._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),n._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# cd /usr/sbin")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 启动    /usr/sbin/nginx")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),n._v("root@localhost nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# ./nginx")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 停止    /usr/sbin/nginx -s stop ")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),n._v("root@localhost nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# ./nginx -s stop ")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 重启    /usr/sbin/nginx -s reload ")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),n._v("root@localhost nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# ./nginx -s reload")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 查看进程")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),n._v("root@localhost nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# ps -ef | grep nginx")]),n._v("\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br"),t("span",{staticClass:"line-number"},[n._v("9")]),t("br")])]),t("h3",{attrs:{id:"访问"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#访问"}},[n._v("#")]),n._v(" 访问")]),n._v(" "),t("p",[n._v("http://localhost:80")]),n._v(" "),t("h4",{attrs:{id:"如果访问报-502-错误-可能是操作系统中-selinux-阻止了-nginx-的访问"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如果访问报-502-错误-可能是操作系统中-selinux-阻止了-nginx-的访问"}},[n._v("#")]),n._v(" 如果访问报 502 错误，可能是操作系统中 SELinux 阻止了 nginx 的访问")]),n._v(" "),t("p",[n._v("SELinux 基于最小权限原则默认拦截了 Nginx 的请求，SELinux 是 Linux 的安全子系统，提供更安全的访问控制。")]),n._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 确认 SELinux 状态")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),n._v("root@localhost nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# sestatus")]),n._v("\nSELinux status:                 enabled\nSELinuxfs mount:                /sys/fs/selinux\nSELinux root directory:         /etc/selinux\nLoaded policy name:             targeted\nCurrent mode:                   permissive\nMode from config file:          disabled\nPolicy MLS status:              enabled\nPolicy deny_unknown status:     allowed\nMax kernel policy version:      "),t("span",{pre:!0,attrs:{class:"token number"}},[n._v("31")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),n._v("root@localhost nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#")]),n._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 临时关闭 SELinux：")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),n._v("root@localhost nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# setenforce 0")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 临时启动 SELinux：")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# [root@localhost nginx]# setenforce 1")]),n._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 永久关闭/启动：")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),n._v("root@localhost nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# vi /etc/sysconfig/selinux")]),n._v("\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br"),t("span",{staticClass:"line-number"},[n._v("9")]),t("br"),t("span",{staticClass:"line-number"},[n._v("10")]),t("br"),t("span",{staticClass:"line-number"},[n._v("11")]),t("br"),t("span",{staticClass:"line-number"},[n._v("12")]),t("br"),t("span",{staticClass:"line-number"},[n._v("13")]),t("br"),t("span",{staticClass:"line-number"},[n._v("14")]),t("br"),t("span",{staticClass:"line-number"},[n._v("15")]),t("br"),t("span",{staticClass:"line-number"},[n._v("16")]),t("br"),t("span",{staticClass:"line-number"},[n._v("17")]),t("br"),t("span",{staticClass:"line-number"},[n._v("18")]),t("br"),t("span",{staticClass:"line-number"},[n._v("19")]),t("br"),t("span",{staticClass:"line-number"},[n._v("20")]),t("br")])]),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 把下面这一行的值从 enforcing 改为 disabled 即可。其他内容省略。")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[n._v("SELINUX")]),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v("disabled\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br")])]),t("p",[n._v("然后重启系统，重启完系统（或者不重启，临时关闭 setenforce 0）之后，")]),n._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 开启 HTTP 访问")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),n._v("root@localhost nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# setsebool -P httpd_can_network_connect 1")]),n._v("\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br")])]),t("p",[n._v("至此，执行完成以上命令后即可对 Nginx 进行正常访问。")])])}),[],!1,null,null,null);s.default=e.exports}}]);