(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{459:function(s,t,n){"use strict";n.r(t);var a=n(28),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"kind-start"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#kind-start"}},[s._v("#")]),s._v(" kind start")]),s._v(" "),n("p",[s._v("官方文档："),n("a",{attrs:{href:"https://kind.sigs.k8s.io/docs/user/quick-start/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://kind.sigs.k8s.io/docs/user/quick-start/"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("前提条件：安装好 Docker Destop(安装好后就可以使用 docker 和 kubectl 命令) 安装文档："),n("a",{attrs:{href:"https://docs.docker.com/docker-for-windows/install-windows-home/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://docs.docker.com/docker-for-windows/install-windows-home/"),n("OutboundLink")],1)]),s._v(" "),n("h2",{attrs:{id:"installation"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[s._v("#")]),s._v(" Installation")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载")]),s._v("\ncurl.exe -Lo kind-windows-amd64.exe https://kind.sigs.k8s.io/dl/v0.10.0/kind-windows-amd64\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 移动到执行目录，并把这个目录添加到环境变量")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" ."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("kind-windows-amd64.exe C:"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Program Files"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Kubernetes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("kind"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("kind.exe\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h2",{attrs:{id:"kind-create-delete-cluster-单节点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#kind-create-delete-cluster-单节点"}},[s._v("#")]),s._v(" kind create/delete cluster 单节点")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 由于 kind create cluster 很慢，所以可以使用 docker 提前拉取镜像")]),s._v("\ndocker pull kindest/node:v1.20.2\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 然后使用 kind 创建 Kubernetes 集群非常的方便，只需要一行命令即可")]),s._v("\nkind create cluster --image kindest/node:v1.20.2\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kind create cluster")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除集群")]),s._v("\nkind delete cluster\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 默认集群名称是 "kind"，如果要创建多个或者指定集群名称，可以指定 name 参数：')]),s._v("\nkind create cluster --name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("kind-2\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除集群")]),s._v("\nkind delete cluster --name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("kind-2\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# list clusters")]),s._v("\nkind get clusters\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将Image加载到集群中")]),s._v("\nkind load docker-image my-custom-image-0 my-custom-image-1\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果使用命名集群，您需要指定希望将映像加载到的集群的名称")]),s._v("\nkind load docker-image my-custom-image-0 my-custom-image-1 --name kind-2\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("Kubernetes default pull policy")]),s._v(" "),n("p",[s._v("The Kubernetes default pull policy is IfNotPresent unless the image tag is :latest or omitted (and implicitly :latest) in which case the default policy is Always. IfNotPresent causes the Kubelet to skip pulling an image if it already exists. If you want those images loaded into node to work as expected, please:")]),s._v(" "),n("p",[s._v("don't use a :latest tag")]),s._v(" "),n("p",[s._v("and / or:")]),s._v(" "),n("p",[s._v("specify imagePullPolicy: IfNotPresent or imagePullPolicy: Never on your container(s).")]),s._v(" "),n("p",[s._v("See "),n("a",{attrs:{href:"https://kubernetes.io/docs/concepts/containers/images/#updating-images",target:"_blank",rel:"noopener noreferrer"}},[s._v("Kubernetes imagePullPolicy"),n("OutboundLink")],1),s._v(" for more information.")])]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),n("p",[s._v("你可以使用docker exec获得一个集群节点上的 Image 列表")]),s._v(" "),n("p",[s._v("docker exec -it my-node-name crictl images")]),s._v(" "),n("p",[s._v("其中my-node-name是Docker容器的名称(例如kind-control-plane)。可通过下面命令查看：")]),s._v(" "),n("p",[s._v("kubectl get nodes")])]),s._v(" "),n("h2",{attrs:{id:"kubectl"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#kubectl"}},[s._v("#")]),s._v(" kubectl")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 为了与特定的集群交互，你只需要在kubectl中指定集群名作为上下文:(kind-kind: 默认的集群名为：kind)")]),s._v("\nkubectl cluster-info --context kind-kind\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看节点")]),s._v("\nkubectl get nodes\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看集群运行情况")]),s._v("\nkubectl get po -n kube-system\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建集群成功之后，就可以使用 kubectl 来操作 k8s 集群了")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取所有资源")]),s._v("\nkubectl get all --all-namespaces\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h2",{attrs:{id:"kind-configuration"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#kind-configuration"}},[s._v("#")]),s._v(" Kind Configuration")]),s._v(" "),n("p",[s._v("kind-config.yaml")]),s._v(" "),n("div",{staticClass:"language-yaml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Cluster\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kind.x"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("k8s.io/v1alpha4\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# clsuter name")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" app"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("cluster\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Kubernetes feature gates可以通过以下配置在集群范围内启用所有Kubernetes组件: ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 官网：https://kubernetes.io/docs/reference/command-line-tools-reference/feature-gates/")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("featureGates")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# any feature gate can be enabled here with "Name": true')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# or disabled here with "Name": false')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# not all feature gates are tested, however")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v('"CSIMigration"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Kubernetes API服务器运行时配置可以使用runtimeConfig键来切换，它映射到——runtime-config kube-apiserver标志。这可以用来禁用beta / alpha api。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 官网：https://kubernetes.io/docs/reference/command-line-tools-reference/kube-apiserver/")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("runtimeConfig")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v('"api/alpha"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"false"')]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以在networking字段下定制集群网络的多个详细信息。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("networking")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# KIND对IPv6集群的支持有限(很快就会支持双栈!)，你可以通过以下设置从默认的IPv4切换到IPV6")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ipFamily")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ipv4\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The API Server listen address and port can be customized with:")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# WARNING: It is _strongly_ recommended that you keep this the default")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# (127.0.0.1) for security reasons. However it is possible to change this.")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiServerAddress")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# By default the API server listens on a random open port.")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# You may choose a specific port but probably don't need to in most cases.")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Using a random port makes it easier to spin up multiple clusters.")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiServerPort")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6443")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# You can configure the subnet used for pod IPs by setting")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("podSubnet")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.244.0.0/16"')]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# You can configure the Kubernetes service subnet used for service IPs by setting")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("serviceSubnet")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.96.0.0/12"')]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# the default CNI will not be installed")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("disableDefaultCNI")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# You can configure the kube-proxy mode that will be used, between iptables and ipvs. By default iptables is used. To disable kube-proxy, set the mode to "none"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kubeProxyMode")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ipvs"')]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The kind: Cluster object has a nodes field containing a list of node objects. If unset this defaults to:")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nodes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# one node hosting a control plane")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("role")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" control"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("plane\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ou can also set a specific Kubernetes version by setting the node's container image. You can find available image tags on the releases page. Please include the @sha256: image digest from the image in the release notes, as seen in this example: ")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# https://github.com/kubernetes-sigs/kind/releases")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kindest/node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("v1.16.4@sha256"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("b91a2c2317a000f3a783489dfb755064177dbc3a0b2f4147d50f04825d016f55\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 额外的挂载可以通过主机上的存储传递到一个kind节点，用于持久化数据，通过代码挂载等。")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# add a mount from /path/to/my/files on the host to /files on the node")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("extraMounts")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("hostPath")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /path/to/my/files/\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPath")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /files\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以使用额外的端口映射将端口转发到kind节点。这是一个跨平台的选择，让流量进入你的集群。  ")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 为了在NodePort上使用端口映射，kind节点containerPort和服务NodePort需要相等。")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# port forward 80 on the host to 80 on this node")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("extraPortMappings")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPort")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("hostPort")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# optional: set the bind address on the host")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 0.0.0.0 is the current default")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("listenAddress")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1"')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# optional: set the protocol to one of TCP, UDP, SCTP.")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# TCP is the default")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("protocol")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" TCP\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("kind create cluster --config"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("kind-config.yaml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("传递给CLI的参数优先于配置文件中的等价参数。无论配置文件中是否存在my-cluster这个值，它都将被优先使用。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("kind create cluster --name my-cluster\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("kind create cluster创建命令，默认配置有几个限制大多数情况是不满足实际需要的，默认配置的主要限制如下：")]),s._v(" "),n("ul",[n("li",[s._v("APIServer 只监听了 127.0.0.1，也就意味着在 Kind 的本机环境之外无法访问 APIServer")]),s._v(" "),n("li",[s._v("由于国内的网络情况关系，Docker Hub 镜像站经常无法访问或超时，会导致无法拉取镜像或拉取镜像非常的慢")])]),s._v(" "),n("p",[s._v("这边提供一个配置文件来解除上诉的限制: kind-config.yaml")]),s._v(" "),n("div",{staticClass:"language-yaml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Cluster\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kind.x"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("k8s.io/v1alpha4\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("networking")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiServerAddress")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.208.64"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerdConfigPatches")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v('plugins."io.containerd.grpc.v1.cri".registry.mirrors."docker.io"'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    endpoint = "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://bfflggen.mirror.aliyuncs.com"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nodes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("role")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" control"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("plane\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Create a kind cluster with extraPortMappings and node-labels.")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# extraPortMappings allow the local host to make requests to the Ingress controller over ports 80/443")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# node-labels only allow the ingress controller to run on a specific node(s) matching the label selector")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kubeadmConfigPatches")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),n("span",{pre:!0,attrs:{class:"token scalar string"}},[s._v('\n    kind: InitConfiguration\n    nodeRegistration:\n      kubeletExtraArgs:\n        node-labels: "ingress-ready=true"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("extraPortMappings")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPort")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("hostPort")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("protocol")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" TCP\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPort")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("hostPort")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("protocol")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" TCP\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("p",[s._v("注意：")]),s._v(" "),n("ul",[n("li",[s._v("apiServerAddress 配置局域网 IP 或想监听的 IP")]),s._v(" "),n("li",[s._v("https://bfflggen.mirror.aliyuncs.com 配置 Docker Hub 加速镜像站点")])]),s._v(" "),n("p",[s._v("然后创建集群：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 由于 kind create cluster 很慢，所以可以使用 docker 提前拉取镜像")]),s._v("\ndocker pull kindest/node:v1.20.2\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 然后使用 kind 创建 Kubernetes 集群非常的方便，只需要一行命令即可")]),s._v("\nkind create cluster --config kind-config.yaml --image kindest/node:v1.20.2\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 后面命令跟前面单机集群一样")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);