(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{521:function(s,a,t){"use strict";t.r(a);var e=t(28),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("官方文档："),t("a",{attrs:{href:"https://rocketmq.apache.org/docs/quick-start/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://rocketmq.apache.org/docs/quick-start/"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("Github: "),t("a",{attrs:{href:"https://github.com/apache/rocketmq",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/apache/rocketmq"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("Github Docker: "),t("a",{attrs:{href:"https://github.com/apache/rocketmq-docker",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/apache/rocketmq-docker"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("DockerHub: "),t("a",{attrs:{href:"https://hub.docker.com/r/apache/rocketmq/tags",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://hub.docker.com/r/apache/rocketmq/tags"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"windows-下的安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#windows-下的安装"}},[s._v("#")]),s._v(" Windows 下的安装")]),s._v(" "),t("p",[s._v("在windows上安装RocketMQ一般只作为新手入门玩一玩。\n因为RocketMQ的存储设计，包括分页设计，设计上都是基于Linux上的。所以生产服务器推荐使用Linux.")]),s._v(" "),t("h4",{attrs:{id:"解压及运行前环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压及运行前环境"}},[s._v("#")]),s._v(" 解压及运行前环境")]),s._v(" "),t("p",[s._v("使用运行版本(Binary)。运行前确保：已经有jdk1.8 （默认支持jdk1.8，如果要使用高版本的jdk，需要修改启动脚本才能启动成功。）")]),s._v(" "),t("h4",{attrs:{id:"配置环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置环境变量"}},[s._v("#")]),s._v(" 配置环境变量")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ROCKETMQ_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"C:\\Programs'),t("span",{pre:!0,attrs:{class:"token entity",title:"\\r"}},[s._v("\\r")]),s._v('ocketmq-4.9.2"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NAMESRV_ADDR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"localhost:9876"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h4",{attrs:{id:"注意事项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[s._v("#")]),s._v(" 注意事项")]),s._v(" "),t("p",[s._v("请在 JDK 1.8 上运行。")]),s._v(" "),t("h5",{attrs:{id:"修改虚拟机内存"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改虚拟机内存"}},[s._v("#")]),s._v(" 修改虚拟机内存")]),s._v(" "),t("p",[s._v("RocketMQ默认的虚拟机内存较大，启动Broker如果因为内存不足失败，需要编辑如下两个配置文件，修改JVM内存大小。")]),s._v(" "),t("p",[s._v("但是这个也仅仅是在测试环境中，RocketMQ在生产上最低要求至少8G内存（官方推荐）才能确保RocketMQ的效果")]),s._v(" "),t("p",[s._v("编辑 runbroker.sh 和 runserver.sh 修改默认JVM大小（windows上对应cmd文件）")]),s._v(" "),t("p",[s._v("vi runbroker.sh           --broker的配置")]),s._v(" "),t("p",[s._v("vi runserver.sh           --nameServer的配置")]),s._v(" "),t("p",[s._v('JAVA_OPT="${JAVA_OPT} -server -Xms512m -Xmx512m -Xmn256m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m"')]),s._v(" "),t("h5",{attrs:{id:"启动脚本有坑-需要修改"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动脚本有坑-需要修改"}},[s._v("#")]),s._v(" 启动脚本有坑，需要修改")]),s._v(" "),t("p",[s._v("当 JDK 安装在有空格的目录下，需要添加引号。这是官方启动脚本里的坑！\nrunserver.cmd")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("rem change memory\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"JAVA_OPT=%JAVA_OPT% -server -Xms512m -Xmx512m -Xmn256m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"JAVA_OPT=%JAVA_OPT% -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:CMSInitiatingOccupancyFraction=70 -XX:+CMSParallelRemarkEnabled -XX:SoftRefLRUPolicyMSPerMB=0 -XX:+CMSClassUnloadingEnabled -XX:SurvivorRatio=8 -XX:-UseParNewGC"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"JAVA_OPT=%JAVA_OPT% -verbose:gc -Xloggc:"')]),s._v("%USERPROFILE%"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("rmq_srv_gc.log"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" -XX:+PrintGCDetails -XX:+PrintGCDateStamps"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"JAVA_OPT=%JAVA_OPT% -XX:-OmitStackTraceInFastThrow"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"JAVA_OPT=%JAVA_OPT% -XX:-UseLargePages"')]),s._v("\nrem 注意这里：If the JAVA_HOME path contains Spaces, "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" double quotation marks.\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"JAVA_OPT=%JAVA_OPT% -Djava.ext.dirs="')]),s._v("%BASE_DIR%lib"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("%JAVA_HOME%"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("jre"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("lib"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("ext"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"JAVA_OPT=%JAVA_OPT% -cp "')]),s._v("%CLASSPATH%"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("runbroker.cmd")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("rem change memory\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"JAVA_OPT=%JAVA_OPT% -server -Xms512m -Xmx512m"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"JAVA_OPT=%JAVA_OPT% -XX:+UseG1GC -XX:G1HeapRegionSize=16m -XX:G1ReservePercent=25 -XX:InitiatingHeapOccupancyPercent=30 -XX:SoftRefLRUPolicyMSPerMB=0 -XX:SurvivorRatio=8"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"JAVA_OPT=%JAVA_OPT% -verbose:gc -Xloggc:%USERPROFILE%\\mq_gc.log -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+PrintGCApplicationStoppedTime -XX:+PrintAdaptiveSizePolicy"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"JAVA_OPT=%JAVA_OPT% -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=5 -XX:GCLogFileSize=30m"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"JAVA_OPT=%JAVA_OPT% -XX:-OmitStackTraceInFastThrow"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"JAVA_OPT=%JAVA_OPT% -XX:+AlwaysPreTouch"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"JAVA_OPT=%JAVA_OPT% -XX:MaxDirectMemorySize=15g"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"JAVA_OPT=%JAVA_OPT% -XX:-UseLargePages -XX:-UseBiasedLocking"')]),s._v("\nrem 注意这里：If the JAVA_HOME path contains Spaces, "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" double quotation marks.\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"JAVA_OPT=%JAVA_OPT% -Djava.ext.dirs="')]),s._v("%BASE_DIR%lib"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("%JAVA_HOME%"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("jre"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("lib"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("ext"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\nrem 注意这里：If the CLASSPATH path contains Spaces, "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" double quotation marks.\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"JAVA_OPT=%JAVA_OPT% -cp "')]),s._v("%CLASSPATH%"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h3",{attrs:{id:"启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[s._v("#")]),s._v(" 启动")]),s._v(" "),t("p",[s._v("RocketMQ的物理架构中，都是需要先启动NameServer再启动Broker的。所以启动顺序一定不要搞反了。")]),s._v(" "),t("p",[s._v("以 powershell 为例。")]),s._v(" "),t("h4",{attrs:{id:"启动-nameserver"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动-nameserver"}},[s._v("#")]),s._v(" 启动 NAMESERVER")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("mqnamesrv.cmd\n\nPS C:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Users"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("mengweijin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mqnamesrv.cmd\nJava HotSpot"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TM"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("-Bit Server VM warning: Using the DefNew young collector with the CMS collector is deprecated and will likely be removed "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" a future release\nJava HotSpot"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TM"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("-Bit Server VM warning: UseCMSCompactAtFullCollection is deprecated and will likely be removed "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" a future release.\nThe Name Server boot success. "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("serializeType")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("JSON\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h4",{attrs:{id:"启动-broker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动-broker"}},[s._v("#")]),s._v(" 启动 BROKER")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("mqbroker.cmd -n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:9876 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("autoCreateTopicEnable")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n\nPS C:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Users"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("mengweijin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mqbroker.cmd -n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:9876 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("autoCreateTopicEnable")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\nThe broker"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("DESKTOP-MDDFCRT, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".5.1:10911"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" boot success. "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("serializeType")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("JSON and name server is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:9876\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"安装-rocketmq-dashboard"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-rocketmq-dashboard"}},[s._v("#")]),s._v(" 安装 rocketmq-dashboard")]),s._v(" "),t("p",[s._v("Github："),t("a",{attrs:{href:"https://github.com/apache/rocketmq-dashboard",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/apache/rocketmq-dashboard"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("DockerHub: "),t("a",{attrs:{href:"https://hub.docker.com/r/apacherocketmq/rocketmq-dashboard/tags",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://hub.docker.com/r/apacherocketmq/rocketmq-dashboard/tags"),t("OutboundLink")],1)]),s._v(" "),t("h4",{attrs:{id:"run-with-docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#run-with-docker"}},[s._v("#")]),s._v(" Run with docker")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker pull apacherocketmq/rocketmq-dashboard:latest\n\ndocker run -d --name rocketmq-dashboard --restart"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always -e "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"JAVA_OPTS=-Drocketmq.namesrv.addr=127.0.0.1:9876"')]),s._v(" -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":8080 -t apacherocketmq/rocketmq-dashboard:latest\ndocker run -d --name rocketmq-dashboard --restart"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always -e "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"JAVA_OPTS=-Drocketmq.namesrv.addr=192.168.8.115:9876"')]),s._v(" -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8089")]),s._v(":8080 -t apacherocketmq/rocketmq-dashboard:latest\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);