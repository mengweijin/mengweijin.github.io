(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{506:function(s,a,n){"use strict";n.r(a);var t=n(28),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h3",{attrs:{id:"检查是否有-gcc-程序"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#检查是否有-gcc-程序"}},[s._v("#")]),s._v(" 检查是否有 gcc 程序")]),s._v(" "),n("p",[s._v("CentOS系统下需要有 gcc 的环境才能编译。")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# gcc -v")]),s._v("\n-bash: gcc: "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" not found\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("这说明当前系统中没有 gcc 依赖，下载下面列表中的安装包："),n("a",{attrs:{href:"http://mirrors.aliyun.com/centos/7/os/x86_64/Packages/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://mirrors.aliyun.com/centos/7/os/x86_64/Packages/"),n("OutboundLink")],1)]),s._v(" "),n("ul",[n("li",[s._v("tcl-8.5.13-8.el7.x86_64.rpm")]),s._v(" "),n("li",[s._v("mpfr-3.1.1-4.el7.x86_64.rpm")]),s._v(" "),n("li",[s._v("libmpc-1.0.1-3.el7.x86_64.rpm")]),s._v(" "),n("li",[s._v("kernel-headers-3.10.0-1160.el7.x86_64.rpm")]),s._v(" "),n("li",[s._v("glibc-headers-2.17-317.el7.x86_64.rpm")]),s._v(" "),n("li",[s._v("glibc-devel-2.17-317.el7.x86_64.rpm")]),s._v(" "),n("li",[s._v("gcc-4.8.5-44.el7.x86_64.rpm")]),s._v(" "),n("li",[s._v("cpp-4.8.5-44.el7.x86_64.rpm")])]),s._v(" "),n("p",[s._v("注：gcc 等需要考虑操作系统内核版本，centos 7 适合 gcc 4.8.5 版本，否则会出问题。")]),s._v(" "),n("h3",{attrs:{id:"安装-gcc-等依赖"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装-gcc-等依赖"}},[s._v("#")]),s._v(" 安装 gcc 等依赖")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注：有网的环境可通过 yum 安装")]),s._v("\nyum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gcc libc "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" tcl\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("以下是离线安装：")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入gcc 所有相关 rpm 所在目录，这里是 /home/gcc/ 目录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /home/gcc")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -ivh *.rpm --nodeps --force")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不要像上面这样使用 --force 命令，如果下面的命令执行出错，肯定是有一些问题需要解决的。")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装rpm工具包")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost gcc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -ivh *.rpm --nodeps")]),s._v("\nwarning: cpp-4.8.5-44.el7.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID f4a80eb5: NOKEY\nPreparing"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".                          "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################# [100%]")]),s._v("\nUpdating / installing"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":mpfr-3.1.1-4.el7                 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################# [ 13%]")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(":libmpc-1.0.1-3.el7               "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################# [ 25%]")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(":cpp-4.8.5-44.el7                 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################# [ 38%]")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(":kernel-headers-3.10.0-1160.el7   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################# [ 50%]")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(":glibc-headers-2.17-317.el7       "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################# [ 63%]")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(":glibc-devel-2.17-317.el7         "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################# [ 75%]")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(":gcc-4.8.5-44.el7                 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################# [ 88%]")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(":tcl-1:8.5.13-8.el7               "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################# [100%]")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装成功后，查看 gcc 版本")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost gcc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# gcc -v")]),s._v("\nUsing built-in specs.\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("COLLECT_GCC")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("gcc\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("COLLECT_LTO_WRAPPER")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/libexec/gcc/x86_64-redhat-linux/4.8.5/lto-wrapper\nTarget: x86_64-redhat-linux\nConfigured with: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/configure --prefix"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr --mandir"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/share/man --infodir"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/share/info --with-bugurl"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://bugzilla.redhat.com/bugzilla --enable-bootstrap --enable-shared --enable-threads"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("posix --enable-checking"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("release --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-linker-hash-style"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("gnu --enable-languages"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("c,c++,objc,obj-c++,java,fortran,ada,go,lto --enable-plugin --enable-initfini-array --disable-libgcj --with-isl"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/builddir/build/BUILD/gcc-4.8.5-20150702/obj-x86_64-redhat-linux/isl-install --with-cloog"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/builddir/build/BUILD/gcc-4.8.5-20150702/obj-x86_64-redhat-linux/cloog-install --enable-gnu-indirect-function --with-tune"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("generic --with-arch_32"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("x86-64 --build"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("x86_64-redhat-linux\nThread model: posix\ngcc version "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.8")]),s._v(".5 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20150623")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Red Hat "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.8")]),s._v(".5-44"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("GCC"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost gcc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br")])]),n("h3",{attrs:{id:"安装-redis"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装-redis"}},[s._v("#")]),s._v(" 安装 Redis")]),s._v(" "),n("p",[s._v("Redis 下载地址："),n("a",{attrs:{href:"https://redis.io/download/#redis-downloads",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://redis.io/download/#redis-downloads"),n("OutboundLink")],1)]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进入到压缩包所在目录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/redis\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tar -xvf redis-6.2.14.tar.gz")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd redis-6.2.14")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make 编译的过程有点长，耐心等待完成。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis-6.2.14"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 直到出现如下信息，并完成命令")]),s._v("\nHint: It"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s a good idea to run '")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("' ;)\n\nmake[1]: Leaving directory `/home/redis/redis-6.2.14/src'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis-6.2.14"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis-6.2.14"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd src")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行 make install 安装命令，并指定安装路径")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost src"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make install PREFIX=/usr/local/redis")]),s._v("\n    CC Makefile.dep\n\nHint: It"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s a good idea to run '")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" test' "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    INSTALL redis-server\n    INSTALL redis-benchmark\n    INSTALL redis-cli\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost src"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("h4",{attrs:{id:"修改-redis-conf-配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#修改-redis-conf-配置"}},[s._v("#")]),s._v(" 修改 redis.conf 配置")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/redis/bin\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从解压的包里面复制配置文件 redis.conf 到 /usr/local/redis/bin/ 目录下")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /home/redis/redis-6.2.14/redis.conf redis.conf\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" redis.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h5",{attrs:{id:"redis-conf-开发环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis-conf-开发环境"}},[s._v("#")]),s._v(" redis.conf 开发环境")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下面这一行最前面加上 # ， 意思是注释掉这一行。解除 redis 只能本机访问的限制。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这个指明，只能在本地(运行的节点)访问redis")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果改为其他的，比如 bind * -::* 或者 bind *0.0.0.0 这都全网可访问了")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 一般开发环境需要允许外网访问 redis，因此，bind 要开放(注释掉或修改为 *0.0.0.0)")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 并且关闭保护模式，即 protected-mode 设置为 no")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bind 127.0.0.1 -::1  ")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# protected-mode 从 yes 修改为 no。关闭保护模式。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保护模式是一个避免你在互联网(外网)访问redis的机制。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当启用保护模式，而且没有密码时，服务器只接受来自IPv4地址(127.0.0.1)、IPv6地址(::1)或Unix套接字本地连接。(没密码+保护模式启动=本地访问)")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认是 yes 开启的。(如果你要从外部访问它，甚至没有认证(不设置密码，不绑定可访问ip)的去访问， 那就弄成 no 自己负责!)")]),s._v("\nprotected-mode no\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 端口号可以使用默认的 6379，也可以修改。")]),s._v("\nport "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# daemonize 默认为 no")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# daemonize 从 no 修改为 yes。意思是否要用守护线程的方式启动。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# daemonize:yes:")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# redis采用的是单进程多线程的模式。当redis.conf中选项daemonize设置成yes时，代表开启守护进程模式。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在该模式下，redis会在后台运行，并将进程pid号写入至redis.conf选项pidfile设置的文件中，此时redis将一直运行，除非手动kill该进程。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# daemonize:no: ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当daemonize选项设置成no时，当前界面将进入redis的命令行界面，exit强制退出或者关闭连接工具(putty,xshell等)都会导致redis进程退出。")]),s._v("\ndaemonize "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果需要密码，则可以设置一个你想要的密码。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开发环境开放了外网连接，为了安全起见，凡开放外网连接，就需要设置密码")]),s._v("\nrequirepass "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置最大内存")]),s._v("\nmaxmemory 1GB\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br")])]),n("h5",{attrs:{id:"redis-conf-生产环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis-conf-生产环境"}},[s._v("#")]),s._v(" redis.conf 生产环境")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认值，无需修改。现在只能本机访问。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("bind")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 -::1  \n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认值，无需修改。现在只能本机访问。")]),s._v("\nprotected-mode "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 端口号可以使用默认的 6379，也可以修改。")]),s._v("\nport "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# daemonize 从 no 修改为 yes。意思是否要用守护线程的方式启动。")]),s._v("\ndaemonize "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 限制了只能本机访问，可以不需要密码。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果需要密码，则去掉这个前面的 #，并设置一个你想要的密码。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# requirepass 123456")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置最大内存")]),s._v("\nmaxmemory 1GB\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("h4",{attrs:{id:"指定配置文件-启动"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#指定配置文件-启动"}},[s._v("#")]),s._v(" 指定配置文件，启动")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost bin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./redis-server redis.conf")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看进程")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost bin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps -ef | grep redis")]),s._v("\nroot      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("19264")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":48 ?        00:00:00 ./redis-server *:6379\nroot      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("19300")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1667")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":48 pts/0    00:00:00 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" --color"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("auto redis\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 本机连接测试")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost bin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./redis-cli -h 127.0.0.1 -p 6379 -n 1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里表示本地连接成功，输入 exit 即可退出 redis 命令界面。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 先停止服务")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost bin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./redis-cli shutdown")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 本机连接 - 带密码")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./redis-cli -h 127.0.0.1 -a '123456' -p 6379 -n 1")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("h3",{attrs:{id:"设置开机自动启动"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#设置开机自动启动"}},[s._v("#")]),s._v(" 设置开机自动启动")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个 redis.service 文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /usr/lib/systemd/system/redis.service\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入编辑模式后，输入下面一段内容，并保存，退出。")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Unit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Description")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("redis-server\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("After")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("network.target\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Type")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("forking\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果你的安装路径不在 /usr/local/redis 则需要对应修改路径。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/redis/bin/redis-server /usr/local/redis/bin/redis.conf\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PrivateTmp")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Install"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WantedBy")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("multi-user.target\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[s._v("然后设置开机自动启动")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开机自动启动")]),s._v("\nsystemctl "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" redis.service\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h4",{attrs:{id:"启动、停止、重启服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启动、停止、重启服务"}},[s._v("#")]),s._v(" 启动、停止、重启服务")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("systemctl daemon-reload\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开机自动启动")]),s._v("\nsystemctl "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" redis.service\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动redis服务")]),s._v("\nsystemctl start redis.service\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看服务状态")]),s._v("\nsystemctl status redis.service\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止服务")]),s._v("\nsystemctl stop redis.service\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 取消开机自动启动(卸载服务)")]),s._v("\nsystemctl disabled redis.service\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);