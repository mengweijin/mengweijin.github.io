(window.webpackJsonp=window.webpackJsonp||[]).push([[124],{544:function(s,t,a){"use strict";a.r(t);var e=a(28),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h4",{attrs:{id:"beandefinitionregistrypostprocessor-接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#beandefinitionregistrypostprocessor-接口"}},[s._v("#")]),s._v(" BeanDefinitionRegistryPostProcessor 接口")]),s._v(" "),a("p",[s._v("完成对 BeanDefinition 的新增、修改；")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BeanDefinitionRegistryPostProcessor")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BeanFactoryPostProcessor")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("postProcessBeanDefinitionRegistry")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BeanDefinitionRegistry")]),s._v(" registry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BeansException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h4",{attrs:{id:"beanfactorypostprocessor-接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#beanfactorypostprocessor-接口"}},[s._v("#")]),s._v(" BeanFactoryPostProcessor 接口")]),s._v(" "),a("p",[s._v("可以 获取到 ConfigurableListableBeanFactory 对象。在项目中 controller, service 等 bean 未实例化之前，注册一些自定义组件 bean 到 Spring 容器中。")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@FunctionalInterface")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BeanFactoryPostProcessor")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("postProcessBeanFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ConfigurableListableBeanFactory")]),s._v(" beanFactory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BeansException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("Spring 核心方法中 invokeBeanFactoryPostProcessors(beanFactory);")]),s._v(" "),a("p",[s._v("在 Spring 核心流程中，invokeBeanFactoryPostProcessors(beanFactory);\n方法完成了对实现了 "),a("strong",[s._v("BeanDefinitionRegistryPostProcessor")]),s._v("，"),a("strong",[s._v("BeanFactoryPostProcessor")]),s._v(" 接口的调用。")]),s._v(" "),a("p",[s._v("其中，BeanDefinitionRegistryPostProcessor 继承了 BeanFactoryPostProcessor。")])]),s._v(" "),a("p",[s._v("这个方法对以上两个接口的实现类做了实例化注册到 Spring 容器并完成对上面这两个接口的调用，调用顺序如下：")]),s._v(" "),a("ol",[a("li",[a("strong",[s._v("BeanDefinitionRegistryPostProcessor")]),s._v(".postProcessBeanDefinitionRegistry(BeanDefinitionRegistry registry);")]),s._v(" "),a("li",[a("strong",[s._v("BeanDefinitionRegistryPostProcessor")]),s._v(".postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory);")]),s._v(" "),a("li",[a("strong",[s._v("BeanFactoryPostProcessor")]),s._v(".postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory);")])]),s._v(" "),a("h4",{attrs:{id:"使用示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用示例"}},[s._v("#")]),s._v(" 使用示例")]),s._v(" "),a("p",[s._v("参考博客："),a("RouterLink",{attrs:{to:"/学习笔记/Spring-Boot/ClassPathBeanDefinitionScanner 自定义注解扫描器.html"}},[s._v("ClassPathBeanDefinitionScanner 自定义注解扫描器")])],1)])}),[],!1,null,null,null);t.default=n.exports}}]);