(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{445:function(s,a,e){"use strict";e.r(a);var t=e(28),r=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p",[s._v("由于官方镜像默认时区、字符集编码、密码验证方式等不适合，因此提供了自定义的个人镜像。")]),s._v(" "),e("h4",{attrs:{id:"dockerfile介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile介绍"}},[s._v("#")]),s._v(" Dockerfile介绍")]),s._v(" "),e("p",[s._v("mysql 8.0 镜像 时区：上海 东八区时区；编码：utf8mb4")]),s._v(" "),e("p",[s._v("官方镜像："),e("a",{attrs:{href:"https://hub.docker.com/_/mysql",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://hub.docker.com/_/mysql"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("官方Github: "),e("a",{attrs:{href:"https://github.com/docker-library/mysql/blob/4af273a07854d7e4b68c5148b8e23b86aa8706e2/8.0/Dockerfile",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/docker-library/mysql/blob/4af273a07854d7e4b68c5148b8e23b86aa8706e2/8.0/Dockerfile"),e("OutboundLink")],1)]),s._v(" "),e("h4",{attrs:{id:"创建容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建容器"}},[s._v("#")]),s._v(" 创建容器")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker run \\\n--name mysql \\\n--restart=always \\\n-p 3306:3306 \\\n-e MYSQL_ROOT_PASSWORD=root \\\n-e MYSQL_DATABASE=app_master \\\n-e MYSQL_USER=appmaster \\\n-e MYSQL_PASSWORD=appmaster \\\n-v /var/lib/mysql/:/var/lib/mysql/ \\\n-d registry.cn-hangzhou.aliyuncs.com/mengweijin/mysql:latest\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("h4",{attrs:{id:"参数说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参数说明"}},[s._v("#")]),s._v(" 参数说明")]),s._v(" "),e("p",[s._v("-e MYSQL_ROOT_PASSWORD=root：指定 root 用户的密码为 root")]),s._v(" "),e("p",[s._v("-v /var/lib/mysql/:/var/lib/mysql/：挂载卷/var/lib/mysql/")]),s._v(" "),e("h4",{attrs:{id:"可选参数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#可选参数"}},[s._v("#")]),s._v(" 可选参数")]),s._v(" "),e("p",[s._v("-e MYSQL_DATABASE=app_master \\：创建一个名为 app_master 的数据库")]),s._v(" "),e("p",[s._v("-e MYSQL_USER=appmaster \\：指定 app_master  appmaster ，该用户对当前数据库拥有所有权限")]),s._v(" "),e("p",[s._v("-e MYSQL_PASSWORD=appmaster \\：指定 app_master 数据库的 appmaster 用户的密码为 appmaster")]),s._v(" "),e("h4",{attrs:{id:"创建数据库、用户并授权"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建数据库、用户并授权"}},[s._v("#")]),s._v(" 创建数据库、用户并授权")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("创建数据库：\nmysql> create database test_database;\n\n创建用户（joe）：\nmysql> CREATE USER 'joe'@'%' IDENTIFIED BY '123456';\n或者只能本地主机登录方式创建：\nmysql> CREATE USER 'joe'@'localhost' IDENTIFIED BY '123456';\n\n授权：\nmysql> grant all privileges on test_database.* to 'joe'@'localhost' identified by '123456';\n\n刷新权限：\nmysql> flush privileges;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("h4",{attrs:{id:"编码说明-当前镜像使用utf8编码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#编码说明-当前镜像使用utf8编码"}},[s._v("#")]),s._v(" 编码说明：当前镜像使用utf8编码")]),s._v(" "),e("h4",{attrs:{id:"注意-当前镜像修改了默认身份验证插件为-mysql-native-password-以兼容客户端工具的连接。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#注意-当前镜像修改了默认身份验证插件为-mysql-native-password-以兼容客户端工具的连接。"}},[s._v("#")]),s._v(" 注意：当前镜像修改了默认身份验证插件为 mysql_native_password 以兼容客户端工具的连接。")]),s._v(" "),e("p",[s._v("mysql5.8开始将caching_sha2_password作为默认的身份验证插件。该caching_sha2_password和 sha256_password认证插件提供比mysql_native_password插件更安全的密码加密，并 caching_sha2_password提供了比更好的性能sha256_password。由于这些优越的安全性和性能特性，caching_sha2_password它是MySQL 8.0首选的身份验证插件，而且也是默认的身份验证插件而不是 mysql_native_password。此更改会影响服务器和libmysqlclient 客户端库；目前来说和经常使用的客户端软件兼容性不好。")]),s._v(" "),e("p",[s._v("在MySQL 5.7中，默认的身份验证插件是 mysql_native_password！")]),s._v(" "),e("p",[s._v("即，mysql5.8版本及以后的版本中，由于navicat等客户端工具只支持mysql_native_password验证插件，不支持caching_sha2_password验证插件，当使用navicat等客户端工具无法连接mysql5.8版本及以后的版本，为了解决这个问题：")]),s._v(" "),e("p",[s._v("（1）配置/etc/mysql/conf.d/mysql.cnf，这将放弃提供的改进的身份验证安全性 caching_sha2_password")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[mysqld]\n    default_authentication_plugin=mysql_native_password\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("（2）也可以修改用户的方式解决，如：")]),s._v(" "),e("p",[s._v("ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY 'root';")])])}),[],!1,null,null,null);a.default=r.exports}}]);